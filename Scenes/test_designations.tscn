[gd_scene load_steps=2 format=3 uid="uid://cwik5st1tpmvn"]

[sub_resource type="CSharpScript" id="CSharpScript_di55w"]
script/source = "using Godot;
using WarEaglesDigital.Scripts;

public partial class TestDesignations : Node3D
{
    public override void _Ready()
    {
        var unitDatabase = new UnitDatabase();
        unitDatabase._Ready(); // Load all data
        GD.Print($\"Total designations: {unitDatabase.Designations.Count}\");

        // Test Fighter/Bomber units
        Designation.ResetAssignedDesignations(); // Fresh designations
        string[] units = { \"P-47C Thunderbolt\", \"Mosquito IV\", \"Bf-109E\" };
        foreach (var unitName in units)
        {
            var airUnit = unitDatabase.GetAirUnitByName(unitName);
            if (airUnit != null)
            {
                var designation = Designation.GetRandomDesignation(airUnit.Nationality, airUnit.Role);
                if (designation != null)
                {
                    airUnit.Designation = designation.SquadronName;
                    GD.Print($\"{unitName} ({airUnit.Role}): {airUnit.Designation}\");
                }
                airUnit.RollAirAttackDice();
            }
            else
            {
                GD.PrintErr($\"{unitName} not found in UnitDatabase.\");
            }
        }
    }
}"

[node name="Node3D" type="Node3D"]
script = SubResource("CSharpScript_di55w")
